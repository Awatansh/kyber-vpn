# VPN System Initialization Guide
# ===============================
# Commands to run after booting up the system

## ğŸš€ Quick Start (Automated - Recommended)
# Run this single command to start everything automatically:

sudo bash run_vpn.sh

# This script handles:
# - Starting VPN server process in background
# - Starting VPN client process in background  
# - Creating and configuring TUN interfaces
# - Setting up routing tables
# - Process management and cleanup
# - All initialization is automated!

## âœ… Verify Everything is Working
# After running the VPN, test it with:

sudo bash test_vpn.sh

# This comprehensive test will show:
# - âœ“ Interface configuration status
# - âœ“ VPN process verification  
# - âœ“ Packet processing through tunnel
# - âœ“ TCP connectivity testing
# - âœ“ Encryption verification
# - âœ“ Complete system validation

## ğŸ“ Navigate to Project Directory First
# Before running any commands, ensure you're in the right location:

cd /home/awatansh/Documents/Dev/crypto/crypro

## ğŸ”§ Manual Setup (Advanced Users Only)
# If you want to start components manually instead of using run_vpn.sh:

# 1. Start VPN Server (in background)
sudo python3 server.py &

# 2. Wait a moment for server to initialize
sleep 2

# 3. Start VPN Client (in background)  
sudo python3 client.py 127.0.0.1 &

# 4. Wait for interfaces to be created
sleep 3

# 5. Verify processes are running
ps aux | grep python

## ğŸ›‘ Stop VPN Services
# To stop all VPN processes:

sudo pkill -f "python.*server.py"
sudo pkill -f "python.*client.py"

# To clean up TUN interfaces (optional):
sudo ip link delete tun0 2>/dev/null || true
sudo ip link delete tun-client0 2>/dev/null || true

## ğŸ” Monitoring and Logs
# Check VPN activity in real-time:

tail -f server.log     # Monitor server activity
tail -f client.log     # Monitor client activity

# Check current VPN status:
python3 validate_vpn.py

## ğŸ“‹ System Requirements Check
# Ensure these are available (usually pre-installed on Linux):

# Check Python 3 availability:
python3 --version

# Check TUN/TAP support:
ls /dev/net/tun

# Check required Python packages:
python3 -c "import cryptography; print('Cryptography available')"

## ğŸ¥ Troubleshooting Commands
# If something isn't working:

# 1. Check if processes are running:
ps aux | grep python

# 2. Check interface status:
ip addr show tun0 tun-client0

# 3. Check routing:
ip route | grep 10.0.0

# 4. Check server listening:
ss -tuln | grep 55555

# 5. Check logs for errors:
tail -20 server.log client.log

# 6. Test basic connectivity:
ping -c 1 -I tun-client0 10.0.0.1

## ğŸ¯ Production Deployment
# For deployment on separate hosts:

# On Server Machine:
sudo python3 server.py

# On Client Machine (replace <server-ip> with actual server IP):
sudo python3 client.py <server-ip>

## âš¡ Full Restart Sequence
# If you need to completely restart everything:

# 1. Stop everything
sudo pkill -f "python.*server.py"
sudo pkill -f "python.*client.py"
sudo ip link delete tun0 2>/dev/null || true
sudo ip link delete tun-client0 2>/dev/null || true

# 2. Clean logs (optional)
rm -f server.log client.log

# 3. Start fresh
sudo bash run_vpn.sh

# 4. Verify everything works
sudo bash test_vpn.sh

## ğŸ“Š Expected Results After Successful Initialization

After running 'sudo bash run_vpn.sh', you should see:
- VPN server process started
- VPN client process started  
- TUN interfaces created (tun0, tun-client0)
- IP addresses assigned (10.0.0.1, 10.0.0.2)
- Routes configured automatically

After running 'sudo bash test_vpn.sh', you should see:
- 8/8 tests PASSED
- "VPN TUNNEL FULLY FUNCTIONAL!" message
- TCP connectivity working
- Bidirectional packet processing confirmed

## ğŸ” Security Notes

- VPN uses AES-GCM encryption for all traffic
- Default password is "mysecretpassword" (can be changed in code)
- All communication on port 55555 is encrypted
- TUN interfaces operate at Layer 3 (IP level)

## ğŸ’¡ Tips for Daily Use

1. **Quick Status Check**: python3 validate_vpn.py
2. **Start VPN**: sudo bash run_vpn.sh  
3. **Test VPN**: sudo bash test_vpn.sh
4. **Stop VPN**: sudo pkill -f "python.*server.py" && sudo pkill -f "python.*client.py"
5. **View Activity**: tail -f client.log server.log

## ğŸ Summary

**MOST USERS ONLY NEED THESE TWO COMMANDS:**

1. sudo bash run_vpn.sh    # Start VPN
2. sudo bash test_vpn.sh   # Verify it works

Everything else is automated! The VPN will be fully operational and ready for use.